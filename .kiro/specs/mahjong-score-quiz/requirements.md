# 要件定義書

## はじめに

本システムは、麻雀の点数計算を学習するためのWebアプリケーションです。ユーザーは、提示された麻雀の手牌に対して、符・飜数・点数を選択肢から選んで回答するクイズ形式で学習します。シンプルでわかりやすいUIを提供し、初心者から中級者まで幅広く利用できることを目指します。将来的にはAndroidアプリケーションへの展開も視野に入れています。

## 用語集

- **システム**: 麻雀点数計算学習アプリケーション
- **ユーザー**: アプリケーションを使用して麻雀の点数計算を学習する人
- **手牌**: 麻雀の牌の組み合わせ
- **符**: 麻雀の点数計算における基礎点の単位
- **飜数**: 麻雀の役の価値を表す単位
- **点数**: 符と飜数から計算される最終的な得点
- **クイズ**: 手牌が提示され、符・飜数・点数を回答する問題
- **問題データ**: クイズで使用される手牌、正解の符・飜数・点数、選択肢のセット
- **セッション**: ユーザーがクイズを開始してから終了するまでの一連の活動
- **正解率**: 回答した問題のうち正解した問題の割合
- **赤ドラ**: 赤色の5の牌で、ドラとして扱われる特殊牌
- **喰いタン**: 鳴いた状態でタンヤオを成立させるルール
- **後付け**: 鳴いた後に役を確定させることを認めるルール

## 要件

### 要件 1

**ユーザーストーリー:** ユーザーとして、クイズ形式で麻雀の点数計算を学習したい。そうすることで、実戦で素早く正確に点数計算ができるようになる。

#### 受入基準

1. システムは、ランダムに選ばれた手牌をユーザーに表示しなければならない
2. システムは、表示された手牌に対して、符・飜数・点数の3つの選択肢群を提供しなければならない
3. ユーザーが符・飜数・点数のすべてを選択したとき、システムは回答を受け付けなければならない
4. システムは、ユーザーの回答が正解か不正解かを即座に判定して表示しなければならない
5. 不正解の場合、システムは正解の符・飜数・点数を表示しなければならない

### 要件 2

**ユーザーストーリー:** ユーザーとして、シンプルでわかりやすいUIで操作したい。そうすることで、学習に集中でき、ストレスなく利用できる。

#### 受入基準

1. システムは、手牌を視覚的にわかりやすく表示しなければならない
2. システムは、符・飜数・点数の選択肢をボタンまたはドロップダウンで明確に表示しなければならない
3. ユーザーが選択肢を選んだとき、システムは選択状態を視覚的にフィードバックしなければならない
4. システムは、正解・不正解の判定結果を色や記号で直感的に表示しなければならない
5. システムは、モバイル端末でも操作しやすいレスポンシブデザインを提供しなければならない

### 要件 3

**ユーザーストーリー:** ユーザーとして、学習の進捗を確認したい。そうすることで、自分の成長を実感し、モチベーションを維持できる。

#### 受入基準

1. システムは、現在のセッションで回答した問題数を表示しなければならない
2. システムは、現在のセッションでの正解数と不正解数を表示しなければならない
3. システムは、現在のセッションでの正解率をパーセンテージで表示しなければならない
4. セッション終了時、システムは最終的な統計情報をまとめて表示しなければならない

### 要件 4

**ユーザーストーリー:** ユーザーとして、次の問題に進んだり、クイズを終了したりできるようにしたい。そうすることで、自分のペースで学習できる。

#### 受入基準

1. 回答後、システムは「次の問題」ボタンを表示しなければならない
2. ユーザーが「次の問題」ボタンをクリックしたとき、システムは新しい問題を表示しなければならない
3. システムは、いつでもクイズを終了できる「終了」ボタンを提供しなければならない
4. ユーザーが「終了」ボタンをクリックしたとき、システムはセッションの統計情報を表示しなければならない

### 要件 5

**ユーザーストーリー:** ユーザーとして、正確な点数計算ロジックで学習したい。そうすることで、正しい知識を身につけられる。

#### 受入基準

1. システムは、標準的な麻雀ルール（日本麻雀）に基づいて符を計算しなければならない
2. システムは、標準的な麻雀ルールに基づいて飜数を計算しなければならない
3. システムは、符と飜数から正確な点数を計算しなければならない
4. システムは、親と子の点数差を正確に反映しなければならない
5. システムは、ツモとロンの点数差を正確に反映しなければならない

### 要件 6

**ユーザーストーリー:** ユーザーとして、様々な難易度の問題に挑戦したい。そうすることで、段階的にスキルアップできる。

#### 受入基準

1. システムは、基本的な役（1〜3飜）の問題を提供しなければならない
2. システムは、中級の役（4〜6飜）の問題を提供しなければならない
3. システムは、高難度の役（7飜以上）の問題を提供しなければならない
4. システムは、問題をランダムに選択する際、様々な難易度が含まれるようにしなければならない

### 要件 7

**ユーザーストーリー:** ユーザーとして、赤ドラや喰いタンなどのルールを調整したい。そうすることで、自分が普段プレイしているルールで学習できる。

#### 受入基準

1. システムは、赤ドラの有無を設定できる機能を提供しなければならない
2. システムは、喰いタンの有無を設定できる機能を提供しなければならない
3. システムは、後付けの有無を設定できる機能を提供しなければならない
4. ユーザーがルール設定を変更したとき、システムは変更後のルールに基づいて問題を生成しなければならない
5. システムは、ユーザーのルール設定を保存して、次回起動時に復元しなければならない

### 要件 8

**ユーザーストーリー:** 開発者として、将来的にAndroidアプリケーションに移行できるようにしたい。そうすることで、より多くのユーザーに提供できる。

#### 受入基準

1. システムは、ビジネスロジックとUI層を明確に分離しなければならない
2. システムは、点数計算ロジックを独立したモジュールとして実装しなければならない
3. システムは、問題データを外部ファイルまたはAPIから取得できる構造にしなければならない
4. システムは、状態管理を一元化して、プラットフォーム間での移植性を高めなければならない

### 要件 9

**ユーザーストーリー:** ユーザーとして、アプリケーションが素早く動作してほしい。そうすることで、快適に学習できる。

#### 受入基準

1. ユーザーが回答を送信したとき、システムは1秒以内に判定結果を表示しなければならない
2. ユーザーが「次の問題」をクリックしたとき、システムは1秒以内に新しい問題を表示しなければならない
3. システムは、初回読み込み時に3秒以内にクイズ画面を表示しなければならない
